<!DOCTYPE html> <html lang="zh"> <head> <meta charset="utf-8"/><title></title> <link rel="shortcut icon" href="" type="image/x-icon"/> </head> <body><style>div {
    opacity: 0.9;
    -webkit-transition: all 0.2s ease-out;
}
 ::-webkit-scrollbar
{
	width: 10px;
	height: 10px;
}
/*滑动轨道*/ 
::-webkit-scrollbar-track
{
	border-radius: 0px;
	background: none;
}
/*滑块*/
::-webkit-scrollbar-thumb
{
	border-radius: 5px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.2);
	background-color: rgba(255,255,255,.75)
}
/*滑块效果*/ 
::-webkit-scrollbar-thumb:hover
{
	border-radius: 5px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.2);
	background-color: rgba(85, 85, 85, 0.4);
}

div:hover 
{
    opacity: 1;
    -moz-transform: scale(1) rotate(0deg);
    -webkit-transform: scale(1) rotate(0deg);
} div{box-shadow: 0px 0px 10px #555555;} *{font-family:"Helvetica Neue",Helvetica,Arial,"Microsoft Yahei","Hiragino Sans GB","HeitiSC","WenQuanYi Micro Hei",sans-serif;}*{
scrollbar-3dlight-color:#D4D0C8; 
   scrollbar-highlight-color:#fff; 
   scrollbar-face-color:#E4E4E4; 
   scrollbar-arrow-color:#666; 
   scrollbar-shadow-color:#808080; 
   scrollbar-darkshadow-color:#D7DCE0; 
   scrollbar-base-color:#D7DCE0; 
   scrollbar-track-color:#;
}</style> <blockquote> <p>洛谷的输入输出常常会出一些莫名其妙的问题，如同样的输入（没有空格），用cin可以AC，用getline却是WA，按理说他们应是一样的，区别在哪里呢？这次实践可能可以解答你的疑惑</p> </blockquote> <h2 id="h2-u6211u7684u63A2u7A76"><a name="我的探究" class="reference-link"></a><span class="header-link octicon octicon-link"></span>我的探究</h2><p>我使用的测试代码如下：</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;iostream&gt;</span></code></li><li class="L1"><code class="lang-cpp"><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string&gt;</span></code></li><li class="L3"><code class="lang-cpp"><span class="kwd">void</span><span class="pln"> outputstring</span><span class="pun">(</span><span class="pln">string u</span><span class="pun">,</span><span class="pln">string desc</span><span class="pun">){</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"-------------------------\n"</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"读取到的字符串:\n\n"</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> u</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"\n\nChar&amp;Ascii对应:\n"</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="kwd">for</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> x</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">x</span><span class="pun">&lt;</span><span class="pln">u</span><span class="pun">.</span><span class="pln">length</span><span class="pun">();</span><span class="pln">x</span><span class="pun">++)</span></code></li><li class="L8"><code class="lang-cpp"><span class="kwd">if</span><span class="pun">((</span><span class="typ">int</span><span class="pun">)</span><span class="pln">u</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]&lt;</span><span class="lit">100</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">cout</span><span class="pun">&lt;&lt;</span><span class="pln"> u</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">" "</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"><span class="kwd">else</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">cout</span><span class="pun">&lt;&lt;</span><span class="pln"> u</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">" "</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> endl</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-cpp"><span class="kwd">for</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> x</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">x</span><span class="pun">&lt;</span><span class="pln">u</span><span class="pun">.</span><span class="pln">length</span><span class="pun">();</span><span class="pln">x</span><span class="pun">++)</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">cout</span><span class="pun">&lt;&lt;(</span><span class="typ">int</span><span class="pun">)</span><span class="pln">u</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]&lt;&lt;</span><span class="str">" "</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"\n\n长度: "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> u</span><span class="pun">.</span><span class="pln">length</span><span class="pun">();</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"\n注释:"</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> desc </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"\n"</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pun">}</span></code></li><li class="L8"><code class="lang-cpp"></code></li><li class="L9"><code class="lang-cpp"><span class="typ">int</span><span class="pln"> main</span><span class="pun">(){</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">freopen</span><span class="pun">(</span><span class="str">"input_t.in"</span><span class="pun">,</span><span class="str">"r"</span><span class="pun">,</span><span class="pln">stdin</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">string u1</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">cin</span><span class="pun">&gt;&gt;</span><span class="pln">u1</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">outputstring</span><span class="pun">(</span><span class="pln">u1</span><span class="pun">,</span><span class="str">"普通CIN | 无空格"</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln">string u2</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln">cin</span><span class="pun">&gt;&gt;</span><span class="pln">u2</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">outputstring</span><span class="pun">(</span><span class="pln">u2</span><span class="pun">,</span><span class="str">"普通CIN | 有空格"</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-cpp"><span class="kwd">for</span><span class="pun">(</span><span class="typ">int</span><span class="pln"> x</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">x</span><span class="pun">&lt;</span><span class="lit">4</span><span class="pun">;</span><span class="pln">x</span><span class="pun">++){</span><span class="pln">cin </span><span class="pun">&gt;&gt;</span><span class="pln"> u2</span><span class="pun">;</span><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"下一次CIN:"</span><span class="pun">&lt;&lt;</span><span class="pln">u2</span><span class="pun">&lt;&lt;</span><span class="str">"\n"</span><span class="pun">;}</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">string u5</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">getline</span><span class="pun">(</span><span class="pln">cin</span><span class="pun">,</span><span class="pln">u5</span><span class="pun">);</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">outputstring</span><span class="pun">(</span><span class="pln">u5</span><span class="pun">,</span><span class="str">"普通Getline | 无空格"</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">string u6</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">getline</span><span class="pun">(</span><span class="pln">cin</span><span class="pun">,</span><span class="pln">u6</span><span class="pun">);</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln">outputstring</span><span class="pun">(</span><span class="pln">u6</span><span class="pun">,</span><span class="str">"普通Getline | 有空格"</span><span class="pun">);</span></code></li><li class="L4"><code class="lang-cpp"></code></li><li class="L5"><code class="lang-cpp"><span class="pln">cin</span><span class="pun">&gt;&gt;</span><span class="pln">noskipws</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln">string u3</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln">cin</span><span class="pun">&gt;&gt;</span><span class="pln">u3</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln">outputstring</span><span class="pun">(</span><span class="pln">u3</span><span class="pun">,</span><span class="str">"带上""noskipws""的CIN | 无空格"</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-cpp"><span class="pln">string u4</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-cpp"><span class="pln">cin</span><span class="pun">&gt;&gt;</span><span class="pln">u4</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">outputstring</span><span class="pun">(</span><span class="pln">u4</span><span class="pun">,</span><span class="str">"带上""noskipws""的CIN | 有空格"</span><span class="pun">);</span></code></li><li class="L2"><code class="lang-cpp"></code></li><li class="L3"><code class="lang-cpp"><span class="pun">}</span></code></li></ol></pre> <p>input_t.in:</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="typ">This_is_a_test_string</span></code></li><li class="L1"><code><span class="typ">This</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a test </span><span class="kwd">string</span></code></li><li class="L2"><code><span class="typ">This_is_a_test_string</span></code></li><li class="L3"><code><span class="typ">This</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a test </span><span class="kwd">string</span></code></li><li class="L4"><code><span class="typ">This_is_a_test_string</span></code></li><li class="L5"><code><span class="typ">This</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a test </span><span class="kwd">string</span></code></li><li class="L6"><code><span class="typ">This_is_a_test_string</span></code></li><li class="L7"><code><span class="typ">This</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a test </span><span class="kwd">string</span></code></li><li class="L8"><code><span class="typ">This_is_a_test_string</span></code></li><li class="L9"><code><span class="typ">This</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a test </span><span class="kwd">string</span></code></li><li class="L0"><code><span class="typ">This_is_a_test_string</span></code></li><li class="L1"><code><span class="typ">This</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> a test </span><span class="kwd">string</span></code></li></ol></pre><p>我尽量模拟了洛谷的环境：</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="typ">Linux</span><span class="pln"> x64</span></code></li><li class="L1"><code><span class="pln">g</span><span class="pun">++编译器</span></code></li><li class="L2"><code><span class="pun">使用</span><span class="pln">freopen</span><span class="pun">重定向</span></code></li></ol></pre><p>这样得到的结果为：</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-读取到的字符串:"></code></li><li class="L1"><code class="lang-读取到的字符串:"><span class="typ">This_is_a_test_string</span></code></li><li class="L2"><code class="lang-读取到的字符串:"></code></li><li class="L3"><code class="lang-读取到的字符串:"><span class="typ">Char</span><span class="pun">&amp;</span><span class="typ">Ascii</span><span class="pun">对应:</span></code></li><li class="L4"><code class="lang-读取到的字符串:"><span class="pln">T h i s _ i s _ a _ t e s t _ s t r i n g </span></code></li><li class="L5"><code class="lang-读取到的字符串:"><span class="lit">84</span><span class="pln"> </span><span class="lit">104</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">97</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">116</span><span class="pln"> </span><span class="lit">101</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">116</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">116</span><span class="pln"> </span><span class="lit">114</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">110</span><span class="pln"> </span><span class="lit">103</span><span class="pln"> </span></code></li><li class="L6"><code class="lang-读取到的字符串:"></code></li><li class="L7"><code class="lang-读取到的字符串:"><span class="pun">长度:</span><span class="pln"> </span><span class="lit">21</span></code></li><li class="L8"><code class="lang-读取到的字符串:"><span class="pun">注释:普通</span><span class="pln">CIN </span><span class="pun">|</span><span class="pln"> </span><span class="pun">无空格</span></code></li><li class="L9"><code class="lang-读取到的字符串:"><span class="pun">-------------------------</span></code></li><li class="L0"><code class="lang-读取到的字符串:"><span class="pun">读取到的字符串:</span></code></li><li class="L1"><code class="lang-读取到的字符串:"></code></li><li class="L2"><code class="lang-读取到的字符串:"><span class="typ">This</span></code></li><li class="L3"><code class="lang-读取到的字符串:"></code></li><li class="L4"><code class="lang-读取到的字符串:"><span class="typ">Char</span><span class="pun">&amp;</span><span class="typ">Ascii</span><span class="pun">对应:</span></code></li><li class="L5"><code class="lang-读取到的字符串:"><span class="pln">T h i s </span></code></li><li class="L6"><code class="lang-读取到的字符串:"><span class="lit">84</span><span class="pln"> </span><span class="lit">104</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span></code></li><li class="L7"><code class="lang-读取到的字符串:"></code></li><li class="L8"><code class="lang-读取到的字符串:"><span class="pun">长度:</span><span class="pln"> </span><span class="lit">4</span></code></li><li class="L9"><code class="lang-读取到的字符串:"><span class="pun">注释:普通</span><span class="pln">CIN </span><span class="pun">|</span><span class="pln"> </span><span class="pun">有空格</span></code></li><li class="L0"><code class="lang-读取到的字符串:"><span class="pun">下一次</span><span class="pln">CIN</span><span class="pun">:</span><span class="kwd">is</span></code></li><li class="L1"><code class="lang-读取到的字符串:"><span class="pun">下一次</span><span class="pln">CIN</span><span class="pun">:</span><span class="pln">a</span></code></li><li class="L2"><code class="lang-读取到的字符串:"><span class="pun">下一次</span><span class="pln">CIN</span><span class="pun">:</span><span class="pln">test</span></code></li><li class="L3"><code class="lang-读取到的字符串:"><span class="pun">下一次</span><span class="pln">CIN</span><span class="pun">:</span><span class="kwd">string</span></code></li><li class="L4"><code class="lang-读取到的字符串:"><span class="pun">-------------------------</span></code></li><li class="L5"><code class="lang-读取到的字符串:"><span class="pun">读取到的字符串:</span></code></li><li class="L6"><code class="lang-读取到的字符串:"></code></li><li class="L7"><code class="lang-读取到的字符串:"></code></li><li class="L8"><code class="lang-读取到的字符串:"></code></li><li class="L9"><code class="lang-读取到的字符串:"><span class="typ">Char</span><span class="pun">&amp;</span><span class="typ">Ascii</span><span class="pun">对应:</span></code></li><li class="L0"><code class="lang-读取到的字符串:"></code></li><li class="L1"><code class="lang-读取到的字符串:"></code></li><li class="L2"><code class="lang-读取到的字符串:"></code></li><li class="L3"><code class="lang-读取到的字符串:"><span class="pun">长度:</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L4"><code class="lang-读取到的字符串:"><span class="pun">注释:普通</span><span class="typ">Getline</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="pun">无空格</span></code></li><li class="L5"><code class="lang-读取到的字符串:"><span class="pun">-------------------------</span></code></li><li class="L6"><code class="lang-读取到的字符串:"><span class="pun">读取到的字符串:</span></code></li><li class="L7"><code class="lang-读取到的字符串:"></code></li><li class="L8"><code class="lang-读取到的字符串:"><span class="typ">This_is_a_test_string</span></code></li><li class="L9"><code class="lang-读取到的字符串:"></code></li><li class="L0"><code class="lang-读取到的字符串:"><span class="typ">Char</span><span class="pun">&amp;</span><span class="typ">Ascii</span><span class="pun">对应:</span></code></li><li class="L1"><code class="lang-读取到的字符串:"><span class="pln">T h i s _ i s _ a _ t e s t _ s t r i n g </span></code></li><li class="L2"><code class="lang-读取到的字符串:"><span class="lit">84</span><span class="pln"> </span><span class="lit">104</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">97</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">116</span><span class="pln"> </span><span class="lit">101</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">116</span><span class="pln"> </span><span class="lit">95</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span><span class="lit">116</span><span class="pln"> </span><span class="lit">114</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">110</span><span class="pln"> </span><span class="lit">103</span><span class="pln"> </span></code></li><li class="L3"><code class="lang-读取到的字符串:"></code></li><li class="L4"><code class="lang-读取到的字符串:"><span class="pun">长度:</span><span class="pln"> </span><span class="lit">21</span></code></li><li class="L5"><code class="lang-读取到的字符串:"><span class="pun">注释:普通</span><span class="typ">Getline</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="pun">有空格</span></code></li><li class="L6"><code class="lang-读取到的字符串:"><span class="pun">-------------------------</span></code></li><li class="L7"><code class="lang-读取到的字符串:"><span class="pun">读取到的字符串:</span></code></li><li class="L8"><code class="lang-读取到的字符串:"></code></li><li class="L9"><code class="lang-读取到的字符串:"><span class="typ">This</span></code></li><li class="L0"><code class="lang-读取到的字符串:"></code></li><li class="L1"><code class="lang-读取到的字符串:"><span class="typ">Char</span><span class="pun">&amp;</span><span class="typ">Ascii</span><span class="pun">对应:</span></code></li><li class="L2"><code class="lang-读取到的字符串:"><span class="pln">T h i s </span></code></li><li class="L3"><code class="lang-读取到的字符串:"><span class="lit">84</span><span class="pln"> </span><span class="lit">104</span><span class="pln"> </span><span class="lit">105</span><span class="pln"> </span><span class="lit">115</span><span class="pln"> </span></code></li><li class="L4"><code class="lang-读取到的字符串:"></code></li><li class="L5"><code class="lang-读取到的字符串:"><span class="pun">长度:</span><span class="pln"> </span><span class="lit">4</span></code></li><li class="L6"><code class="lang-读取到的字符串:"><span class="pun">注释:带上</span><span class="pln">noskipws</span><span class="pun">的</span><span class="pln">CIN </span><span class="pun">|</span><span class="pln"> </span><span class="pun">无空格</span></code></li><li class="L7"><code class="lang-读取到的字符串:"><span class="pun">-------------------------</span></code></li><li class="L8"><code class="lang-读取到的字符串:"><span class="pun">读取到的字符串:</span></code></li><li class="L9"><code class="lang-读取到的字符串:"></code></li><li class="L0"><code class="lang-读取到的字符串:"></code></li><li class="L1"><code class="lang-读取到的字符串:"></code></li><li class="L2"><code class="lang-读取到的字符串:"><span class="typ">Char</span><span class="pun">&amp;</span><span class="typ">Ascii</span><span class="pun">对应:</span></code></li><li class="L3"><code class="lang-读取到的字符串:"></code></li><li class="L4"><code class="lang-读取到的字符串:"></code></li><li class="L5"><code class="lang-读取到的字符串:"></code></li><li class="L6"><code class="lang-读取到的字符串:"><span class="pun">长度:</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L7"><code class="lang-读取到的字符串:"><span class="pun">注释:带上</span><span class="pln">noskipws</span><span class="pun">的</span><span class="pln">CIN </span><span class="pun">|</span><span class="pln"> </span><span class="pun">有空格</span></code></li></ol></pre> <p>我们会发现，在26行，getline没有获取到任何数据，这是为什么呢？</p> <p>在代码的28行，我将x &lt; 4改为了x &lt; 5，得到多次cin的结果为</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">……</span></code></li><li class="L1"><code><span class="pun">下一次</span><span class="pln">CIN</span><span class="pun">:</span><span class="kwd">string</span></code></li><li class="L2"><code><span class="pun">下一次</span><span class="pln">CIN</span><span class="pun">:</span><span class="typ">This_is_a_test_string</span></code></li></ol></pre><p>可以看到CIN再次往后读了一行，getline仍然获取不到任何东西</p> <p>于是我推测CIN会忽略掉换行符，但是getline不会，在CIN第四次读取时，缓冲区内还有一个\n,如果使用getline读，就会在这个换行符位置截断，导致没有任何数据</p> <p>但是CIN忽略了换行符，再次调用就直接读取了下一行内容，这便导致getline读取不到任何数据——或者说只能读到一个空格</p> <p>这是cin与getline混用的结果</p> <p>但是这为什么会导致某些字符相关的题目出错呢？我们可以看到getline并不会读入\n啊</p> <p>在我翻洛谷时，发现文档里有这样一段文字</p> <blockquote> <p>Linux 中换行符是’\n’而Windows中是’\r\n’（多一个字符），有些数据在 Windows 中生成，而在洛谷评测机 Linux 环境下评测。这种情况在字符串输入中非常常见。</p> </blockquote> <p>在我将末尾换行符换为\r\n（VSCode右下角，将LF切换为CRLF）后，我再次运行程序（没有更改为x &lt; 5的版本）：</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">读取到的字符串:</span></code></li><li class="L1"><code></code></li><li class="L2"><code></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="typ">Char</span><span class="pun">&amp;</span><span class="typ">Ascii</span><span class="pun">对应:</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="lit">13</span><span class="pln"> </span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pun">长度:</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L9"><code><span class="pun">注释:普通</span><span class="typ">Getline</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="pun">无空格</span></code></li></ol></pre><p>我们会发现，这个地方多出了一个/r(13)，但是实际上cin还是忽略了\r\n</p> <p>这解答了我们一开始的疑惑，CIN和GETLINE在输入重定向后有一个区别——一个不读取\r，一个读取\r（没有重定向的时候是没有这个区别的，这大概也是为什么在Windows下能过样例的代码在oj上不能AC）</p> <p>再看noskipws，据说他可以让cin不跳过空格，用法是这样：</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-cpp"><span class="pln">cin </span><span class="pun">&gt;&gt;</span><span class="pln"> noskipws</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln">string str</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln">cin </span><span class="pun">&gt;&gt;</span><span class="pln"> str</span><span class="pun">;</span></code></li></ol></pre> <p>实际上，我发现加了noskipws后，cin根本读不到任何数据，即使中间没有空格，即使我直接输入</p> <h2 id="h2-u603Bu7ED3u4E00u4E0B"><a name="总结一下" class="reference-link"></a><span class="header-link octicon octicon-link"></span>总结一下</h2><p>C++对于字符串的输入操作，大概有以下几种方式：<br>getline 不会忽略空格，不会忽略\r<br>getchar 不知为何会报RuntimeError，我尽可能不用<br>cin 忽略空格，忽略\r<br>scanf [?] </p><p>总而言之，在做题时，如果不是说明了有空格的字符串处理题目，最好用cin<br>必须要用getline的话输入时判断或者手动将13去掉<br>这是这一次探究的结果 </p></body> </html>
